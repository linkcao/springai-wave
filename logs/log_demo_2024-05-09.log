2024-05-09 10:40:12.283 [SpringApplicationShutdownHook-650] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean 650 destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-09 10:40:12.311 [SpringApplicationShutdownHook-350] INFO  com.zaxxer.hikari.HikariDataSource 350 close - HikariPool-1 - Shutdown initiated...
2024-05-09 10:40:12.316 [SpringApplicationShutdownHook-352] INFO  com.zaxxer.hikari.HikariDataSource 352 close - HikariPool-1 - Shutdown completed.
2024-05-09 10:45:20.033 [main-50] INFO  c.n.KeyPollingDemoApplication 50 logStarting - Starting KeyPollingDemoApplication using Java 17.0.11 with PID 62084 (D:\WorkSpace\spring-ai\spring-ai-key-polling-demo\target\classes started by Linkcao in D:\WorkSpace\spring-ai)
2024-05-09 10:45:20.036 [main-654] INFO  c.n.KeyPollingDemoApplication 654 logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-09 10:45:20.786 [main-139] INFO  o.s.d.r.c.RepositoryConfigurationDelegate 139 registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-09 10:45:20.854 [main-208] INFO  o.s.d.r.c.RepositoryConfigurationDelegate 208 registerRepositoriesIn - Finished Spring Data repository scanning in 54 ms. Found 5 JPA repository interfaces.
2024-05-09 10:45:21.292 [main-109] INFO  o.s.b.w.e.tomcat.TomcatWebServer 109 initialize - Tomcat initialized with port 8321 (http)
2024-05-09 10:45:21.301 [main-173] INFO  o.a.coyote.http11.Http11NioProtocol 173 log - Initializing ProtocolHandler ["http-nio-8321"]
2024-05-09 10:45:21.304 [main-173] INFO  o.a.catalina.core.StandardService 173 log - Starting service [Tomcat]
2024-05-09 10:45:21.304 [main-173] INFO  o.a.catalina.core.StandardEngine 173 log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-09 10:45:21.397 [main-173] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] 173 log - Initializing Spring embedded WebApplicationContext
2024-05-09 10:45:21.399 [main-296] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext 296 prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 1186 ms
2024-05-09 10:45:21.531 [main-110] INFO  com.zaxxer.hikari.HikariDataSource 110 getConnection - HikariPool-1 - Starting...
2024-05-09 10:45:21.656 [main-565] INFO  com.zaxxer.hikari.pool.HikariPool 565 checkFailFast - HikariPool-1 - Added connection com.mysql.jdbc.JDBC4Connection@649b5891
2024-05-09 10:45:21.659 [main-123] INFO  com.zaxxer.hikari.HikariDataSource 123 getConnection - HikariPool-1 - Start completed.
2024-05-09 10:45:21.765 [main-44] INFO  org.hibernate.Version 44 logVersion - HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-09 10:45:21.811 [main-50] INFO  o.h.c.i.RegionFactoryInitiator 50 initiateService - HHH000026: Second-level cache disabled
2024-05-09 10:45:22.011 [main-87] INFO  o.s.o.j.p.SpringPersistenceUnitInfo 87 addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-09 10:45:22.053 [main-153] WARN  org.hibernate.orm.deprecation 153 constructDialect - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-05-09 10:45:22.739 [main-58] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator 58 initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-09 10:45:22.742 [main-437] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean 437 buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-09 10:45:23.381 [main-173] INFO  o.a.coyote.http11.Http11NioProtocol 173 log - Starting ProtocolHandler ["http-nio-8321"]
2024-05-09 10:45:23.399 [main-241] INFO  o.s.b.w.e.tomcat.TomcatWebServer 241 start - Tomcat started on port 8321 (http) with context path ''
2024-05-09 10:45:23.409 [main-56] INFO  c.n.KeyPollingDemoApplication 56 logStarted - Started KeyPollingDemoApplication in 3.859 seconds (process running for 4.64)
2024-05-09 10:45:38.123 [http-nio-8321-exec-1-173] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] 173 log - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-09 10:45:38.123 [http-nio-8321-exec-1-532] INFO  o.s.web.servlet.DispatcherServlet 532 initServletBean - Initializing Servlet 'dispatcherServlet'
2024-05-09 10:45:38.125 [http-nio-8321-exec-1-554] INFO  o.s.web.servlet.DispatcherServlet 554 initServletBean - Completed initialization in 2 ms
2024-05-09 10:45:41.163 [pool-2-thread-2-83] INFO  c.ningning0111.service.ChatService 83 processPrompt - 提示信息Hello，请回答321
2024-05-09 10:45:41.163 [pool-2-thread-2-84] INFO  c.ningning0111.service.ChatService 84 processPrompt - 输出你好，321是什么问题的答案呢？请提供更多的信息，我会尽力帮助你。
2024-05-09 10:45:41.218 [pool-2-thread-3-83] INFO  c.ningning0111.service.ChatService 83 processPrompt - 提示信息Hello，请回答1234
2024-05-09 10:45:41.218 [pool-2-thread-3-84] INFO  c.ningning0111.service.ChatService 84 processPrompt - 输出您好，请问有什么可以帮到您的吗？
2024-05-09 10:45:41.649 [pool-2-thread-6-83] INFO  c.ningning0111.service.ChatService 83 processPrompt - 提示信息Hello，请回答3216
2024-05-09 10:45:41.649 [pool-2-thread-1-83] INFO  c.ningning0111.service.ChatService 83 processPrompt - 提示信息Hello，请回答123
2024-05-09 10:45:41.649 [pool-2-thread-6-84] INFO  c.ningning0111.service.ChatService 84 processPrompt - 输出你好，请问有什么可以帮助您的吗？
2024-05-09 10:45:41.649 [pool-2-thread-1-84] INFO  c.ningning0111.service.ChatService 84 processPrompt - 输出您好，您有什么问题需要我回答吗？
2024-05-09 10:45:41.663 [pool-2-thread-4-83] INFO  c.ningning0111.service.ChatService 83 processPrompt - 提示信息Hello，请回答3215
2024-05-09 10:45:41.664 [pool-2-thread-4-84] INFO  c.ningning0111.service.ChatService 84 processPrompt - 输出你好，请问有什么我可以帮助您的吗？3215是什么意思呢？
2024-05-09 10:45:42.000 [pool-2-thread-5-83] INFO  c.ningning0111.service.ChatService 83 processPrompt - 提示信息Hello，请回答1231
2024-05-09 10:45:42.000 [pool-2-thread-5-84] INFO  c.ningning0111.service.ChatService 84 processPrompt - 输出抱歉，我不确定你的问题是什么。你能提供更多信息吗？
2024-05-09 11:54:25.712 [main-50] INFO  c.linkcao.SpringAIBatchApplication 50 logStarting - Starting SpringAIBatchApplication using Java 17.0.11 with PID 24916 (D:\WorkSpace\springai-wave\springai-batch\target\classes started by Linkcao in D:\WorkSpace\springai-wave)
2024-05-09 11:54:25.715 [main-654] INFO  c.linkcao.SpringAIBatchApplication 654 logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-09 11:54:26.681 [main-139] INFO  o.s.d.r.c.RepositoryConfigurationDelegate 139 registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-09 11:54:26.753 [main-208] INFO  o.s.d.r.c.RepositoryConfigurationDelegate 208 registerRepositoriesIn - Finished Spring Data repository scanning in 56 ms. Found 5 JPA repository interfaces.
2024-05-09 11:54:27.219 [main-109] INFO  o.s.b.w.e.tomcat.TomcatWebServer 109 initialize - Tomcat initialized with port 8321 (http)
2024-05-09 11:54:27.230 [main-173] INFO  o.a.coyote.http11.Http11NioProtocol 173 log - Initializing ProtocolHandler ["http-nio-8321"]
2024-05-09 11:54:27.231 [main-173] INFO  o.a.catalina.core.StandardService 173 log - Starting service [Tomcat]
2024-05-09 11:54:27.232 [main-173] INFO  o.a.catalina.core.StandardEngine 173 log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-09 11:54:27.309 [main-173] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] 173 log - Initializing Spring embedded WebApplicationContext
2024-05-09 11:54:27.309 [main-296] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext 296 prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 1366 ms
2024-05-09 11:54:27.461 [main-110] INFO  com.zaxxer.hikari.HikariDataSource 110 getConnection - HikariPool-1 - Starting...
2024-05-09 11:54:27.600 [main-565] INFO  com.zaxxer.hikari.pool.HikariPool 565 checkFailFast - HikariPool-1 - Added connection com.mysql.jdbc.JDBC4Connection@6dae70f9
2024-05-09 11:54:27.604 [main-123] INFO  com.zaxxer.hikari.HikariDataSource 123 getConnection - HikariPool-1 - Start completed.
2024-05-09 11:54:27.701 [main-44] INFO  org.hibernate.Version 44 logVersion - HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-09 11:54:27.743 [main-50] INFO  o.h.c.i.RegionFactoryInitiator 50 initiateService - HHH000026: Second-level cache disabled
2024-05-09 11:54:27.954 [main-87] INFO  o.s.o.j.p.SpringPersistenceUnitInfo 87 addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-09 11:54:27.999 [main-153] WARN  org.hibernate.orm.deprecation 153 constructDialect - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-05-09 11:54:28.864 [main-58] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator 58 initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-09 11:54:28.870 [main-437] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean 437 buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-09 11:54:29.763 [main-173] INFO  o.a.coyote.http11.Http11NioProtocol 173 log - Starting ProtocolHandler ["http-nio-8321"]
2024-05-09 11:54:29.779 [main-241] INFO  o.s.b.w.e.tomcat.TomcatWebServer 241 start - Tomcat started on port 8321 (http) with context path ''
2024-05-09 11:54:29.793 [main-56] INFO  c.linkcao.SpringAIBatchApplication 56 logStarted - Started SpringAIBatchApplication in 4.694 seconds (process running for 5.682)
2024-05-09 11:54:56.191 [http-nio-8321-exec-1-173] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] 173 log - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-09 11:54:56.191 [http-nio-8321-exec-1-532] INFO  o.s.web.servlet.DispatcherServlet 532 initServletBean - Initializing Servlet 'dispatcherServlet'
2024-05-09 11:54:56.193 [http-nio-8321-exec-1-554] INFO  o.s.web.servlet.DispatcherServlet 554 initServletBean - Completed initialization in 1 ms
2024-05-09 11:54:57.814 [http-nio-8321-exec-1-53] WARN  o.s.ai.retry.RetryUtils 53 onError - Retry error. Retry count:1org.springframework.ai.retry.NonTransientAiException: 429 - {"error":{"message":"当前分组上游负载已饱和，请稍后再试 (request id: 202405091154557720822721dWuBLAi) (request id: 20240509115455542379929iijXYlA6)","type":"","param":"","code":"429"}}
	at org.springframework.ai.retry.RetryUtils$2.handleError(RetryUtils.java:77)
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
	at org.springframework.web.client.StatusHandler.lambda$fromErrorHandler$1(StatusHandler.java:71)
	at org.springframework.web.client.StatusHandler.handle(StatusHandler.java:146)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.applyStatusHandlers(DefaultRestClient.java:680)
	at org.springframework.web.client.DefaultRestClient.readWithMessageConverters(DefaultRestClient.java:200)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.readBody(DefaultRestClient.java:667)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.toEntityInternal(DefaultRestClient.java:637)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.toEntity(DefaultRestClient.java:626)
	at org.springframework.ai.openai.api.OpenAiApi.chatCompletionEntity(OpenAiApi.java:674)
	at org.springframework.ai.openai.OpenAiChatClient.doChatCompletion(OpenAiChatClient.java:339)
	at org.springframework.ai.openai.OpenAiChatClient.doChatCompletion(OpenAiChatClient.java:71)
	at org.springframework.ai.model.function.AbstractFunctionCallSupport.callWithFunctionSupport(AbstractFunctionCallSupport.java:124)
	at org.springframework.ai.openai.OpenAiChatClient.lambda$call$1(OpenAiChatClient.java:139)
	at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:335)
	at org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:211)
	at org.springframework.ai.openai.OpenAiChatClient.call(OpenAiChatClient.java:137)
	at org.springframework.ai.chat.ChatClient.call(ChatClient.java:27)
	at com.linkcao.controller.ChatController.chatDemo(ChatController.java:44)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:259)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:192)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:920)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:830)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)

2024-05-09 11:54:57.821 [http-nio-8321-exec-1-175] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] 175 log - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.ai.retry.NonTransientAiException: 429 - {"error":{"message":"当前分组上游负载已饱和，请稍后再试 (request id: 202405091154557720822721dWuBLAi) (request id: 20240509115455542379929iijXYlA6)","type":"","param":"","code":"429"}}] with root causeorg.springframework.ai.retry.NonTransientAiException: 429 - {"error":{"message":"当前分组上游负载已饱和，请稍后再试 (request id: 202405091154557720822721dWuBLAi) (request id: 20240509115455542379929iijXYlA6)","type":"","param":"","code":"429"}}
	at org.springframework.ai.retry.RetryUtils$2.handleError(RetryUtils.java:77)
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
	at org.springframework.web.client.StatusHandler.lambda$fromErrorHandler$1(StatusHandler.java:71)
	at org.springframework.web.client.StatusHandler.handle(StatusHandler.java:146)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.applyStatusHandlers(DefaultRestClient.java:680)
	at org.springframework.web.client.DefaultRestClient.readWithMessageConverters(DefaultRestClient.java:200)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.readBody(DefaultRestClient.java:667)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.toEntityInternal(DefaultRestClient.java:637)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.toEntity(DefaultRestClient.java:626)
	at org.springframework.ai.openai.api.OpenAiApi.chatCompletionEntity(OpenAiApi.java:674)
	at org.springframework.ai.openai.OpenAiChatClient.doChatCompletion(OpenAiChatClient.java:339)
	at org.springframework.ai.openai.OpenAiChatClient.doChatCompletion(OpenAiChatClient.java:71)
	at org.springframework.ai.model.function.AbstractFunctionCallSupport.callWithFunctionSupport(AbstractFunctionCallSupport.java:124)
	at org.springframework.ai.openai.OpenAiChatClient.lambda$call$1(OpenAiChatClient.java:139)
	at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:335)
	at org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:211)
	at org.springframework.ai.openai.OpenAiChatClient.call(OpenAiChatClient.java:137)
	at org.springframework.ai.chat.ChatClient.call(ChatClient.java:27)
	at com.linkcao.controller.ChatController.chatDemo(ChatController.java:44)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:259)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:192)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:920)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:830)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)

2024-05-09 11:55:35.177 [http-nio-8321-exec-3-53] WARN  o.s.ai.retry.RetryUtils 53 onError - Retry error. Retry count:1org.springframework.ai.retry.NonTransientAiException: 429 - {"error":{"message":"当前分组上游负载已饱和，请稍后再试 (request id: 2024050911553332889782xVfBReY3) (request id: 20240509115532794775332tLWdndp1)","type":"","param":"","code":"429"}}
	at org.springframework.ai.retry.RetryUtils$2.handleError(RetryUtils.java:77)
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
	at org.springframework.web.client.StatusHandler.lambda$fromErrorHandler$1(StatusHandler.java:71)
	at org.springframework.web.client.StatusHandler.handle(StatusHandler.java:146)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.applyStatusHandlers(DefaultRestClient.java:680)
	at org.springframework.web.client.DefaultRestClient.readWithMessageConverters(DefaultRestClient.java:200)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.readBody(DefaultRestClient.java:667)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.toEntityInternal(DefaultRestClient.java:637)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.toEntity(DefaultRestClient.java:626)
	at org.springframework.ai.openai.api.OpenAiApi.chatCompletionEntity(OpenAiApi.java:674)
	at org.springframework.ai.openai.OpenAiChatClient.doChatCompletion(OpenAiChatClient.java:339)
	at org.springframework.ai.openai.OpenAiChatClient.doChatCompletion(OpenAiChatClient.java:71)
	at org.springframework.ai.model.function.AbstractFunctionCallSupport.callWithFunctionSupport(AbstractFunctionCallSupport.java:124)
	at org.springframework.ai.openai.OpenAiChatClient.lambda$call$1(OpenAiChatClient.java:139)
	at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:335)
	at org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:211)
	at org.springframework.ai.openai.OpenAiChatClient.call(OpenAiChatClient.java:137)
	at org.springframework.ai.chat.ChatClient.call(ChatClient.java:27)
	at com.linkcao.controller.ChatController.chatDemo(ChatController.java:44)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:259)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:192)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:920)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:830)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)

2024-05-09 11:55:35.179 [http-nio-8321-exec-3-175] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] 175 log - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.ai.retry.NonTransientAiException: 429 - {"error":{"message":"当前分组上游负载已饱和，请稍后再试 (request id: 2024050911553332889782xVfBReY3) (request id: 20240509115532794775332tLWdndp1)","type":"","param":"","code":"429"}}] with root causeorg.springframework.ai.retry.NonTransientAiException: 429 - {"error":{"message":"当前分组上游负载已饱和，请稍后再试 (request id: 2024050911553332889782xVfBReY3) (request id: 20240509115532794775332tLWdndp1)","type":"","param":"","code":"429"}}
	at org.springframework.ai.retry.RetryUtils$2.handleError(RetryUtils.java:77)
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
	at org.springframework.web.client.StatusHandler.lambda$fromErrorHandler$1(StatusHandler.java:71)
	at org.springframework.web.client.StatusHandler.handle(StatusHandler.java:146)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.applyStatusHandlers(DefaultRestClient.java:680)
	at org.springframework.web.client.DefaultRestClient.readWithMessageConverters(DefaultRestClient.java:200)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.readBody(DefaultRestClient.java:667)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.toEntityInternal(DefaultRestClient.java:637)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.toEntity(DefaultRestClient.java:626)
	at org.springframework.ai.openai.api.OpenAiApi.chatCompletionEntity(OpenAiApi.java:674)
	at org.springframework.ai.openai.OpenAiChatClient.doChatCompletion(OpenAiChatClient.java:339)
	at org.springframework.ai.openai.OpenAiChatClient.doChatCompletion(OpenAiChatClient.java:71)
	at org.springframework.ai.model.function.AbstractFunctionCallSupport.callWithFunctionSupport(AbstractFunctionCallSupport.java:124)
	at org.springframework.ai.openai.OpenAiChatClient.lambda$call$1(OpenAiChatClient.java:139)
	at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:335)
	at org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:211)
	at org.springframework.ai.openai.OpenAiChatClient.call(OpenAiChatClient.java:137)
	at org.springframework.ai.chat.ChatClient.call(ChatClient.java:27)
	at com.linkcao.controller.ChatController.chatDemo(ChatController.java:44)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:259)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:192)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:920)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:830)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)

2024-05-09 11:56:31.173 [pool-2-thread-5-53] WARN  o.s.ai.retry.RetryUtils 53 onError - Retry error. Retry count:1org.springframework.ai.retry.NonTransientAiException: 429 - {"error":{"message":"当前分组上游负载已饱和，请稍后再试 (request id: 20240509115629266837780UGd0ITWx) (request id: 2024050911562934980282DGSYHSBz)","type":"","param":"","code":"429"}}
	at org.springframework.ai.retry.RetryUtils$2.handleError(RetryUtils.java:77)
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
	at org.springframework.web.client.StatusHandler.lambda$fromErrorHandler$1(StatusHandler.java:71)
	at org.springframework.web.client.StatusHandler.handle(StatusHandler.java:146)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.applyStatusHandlers(DefaultRestClient.java:680)
	at org.springframework.web.client.DefaultRestClient.readWithMessageConverters(DefaultRestClient.java:200)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.readBody(DefaultRestClient.java:667)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.toEntityInternal(DefaultRestClient.java:637)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.toEntity(DefaultRestClient.java:626)
	at org.springframework.ai.openai.api.OpenAiApi.chatCompletionEntity(OpenAiApi.java:674)
	at org.springframework.ai.openai.OpenAiChatClient.doChatCompletion(OpenAiChatClient.java:339)
	at org.springframework.ai.openai.OpenAiChatClient.doChatCompletion(OpenAiChatClient.java:71)
	at org.springframework.ai.model.function.AbstractFunctionCallSupport.callWithFunctionSupport(AbstractFunctionCallSupport.java:124)
	at org.springframework.ai.openai.OpenAiChatClient.lambda$call$1(OpenAiChatClient.java:139)
	at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:335)
	at org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:211)
	at org.springframework.ai.openai.OpenAiChatClient.call(OpenAiChatClient.java:137)
	at org.springframework.ai.chat.ChatClient.call(ChatClient.java:27)
	at com.linkcao.service.ChatService.processPrompt(ChatService.java:82)
	at com.linkcao.service.ChatService.lambda$processPrompts$0(ChatService.java:71)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)

2024-05-09 11:56:31.228 [pool-2-thread-4-53] WARN  o.s.ai.retry.RetryUtils 53 onError - Retry error. Retry count:1org.springframework.ai.retry.NonTransientAiException: 429 - {"error":{"message":"当前分组上游负载已饱和，请稍后再试 (request id: 202405091156292731235407HS8Vlyn) (request id: 20240509115629333053687HfrqSoB)","type":"","param":"","code":"429"}}
	at org.springframework.ai.retry.RetryUtils$2.handleError(RetryUtils.java:77)
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
	at org.springframework.web.client.StatusHandler.lambda$fromErrorHandler$1(StatusHandler.java:71)
	at org.springframework.web.client.StatusHandler.handle(StatusHandler.java:146)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.applyStatusHandlers(DefaultRestClient.java:680)
	at org.springframework.web.client.DefaultRestClient.readWithMessageConverters(DefaultRestClient.java:200)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.readBody(DefaultRestClient.java:667)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.toEntityInternal(DefaultRestClient.java:637)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.toEntity(DefaultRestClient.java:626)
	at org.springframework.ai.openai.api.OpenAiApi.chatCompletionEntity(OpenAiApi.java:674)
	at org.springframework.ai.openai.OpenAiChatClient.doChatCompletion(OpenAiChatClient.java:339)
	at org.springframework.ai.openai.OpenAiChatClient.doChatCompletion(OpenAiChatClient.java:71)
	at org.springframework.ai.model.function.AbstractFunctionCallSupport.callWithFunctionSupport(AbstractFunctionCallSupport.java:124)
	at org.springframework.ai.openai.OpenAiChatClient.lambda$call$1(OpenAiChatClient.java:139)
	at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:335)
	at org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:211)
	at org.springframework.ai.openai.OpenAiChatClient.call(OpenAiChatClient.java:137)
	at org.springframework.ai.chat.ChatClient.call(ChatClient.java:27)
	at com.linkcao.service.ChatService.processPrompt(ChatService.java:82)
	at com.linkcao.service.ChatService.lambda$processPrompts$0(ChatService.java:71)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)

2024-05-09 11:56:31.759 [pool-2-thread-1-83] INFO  com.linkcao.service.ChatService 83 processPrompt - 提示信息Hello，请回答123
2024-05-09 11:56:31.759 [pool-2-thread-1-84] INFO  com.linkcao.service.ChatService 84 processPrompt - 输出您好，请问有什么可以帮助您的吗？
2024-05-09 11:56:31.774 [pool-2-thread-3-83] INFO  com.linkcao.service.ChatService 83 processPrompt - 提示信息Hello，请回答1234
2024-05-09 11:56:31.774 [pool-2-thread-3-84] INFO  com.linkcao.service.ChatService 84 processPrompt - 输出您好，您的问题是什么呢？需要我帮您解答什么吗？
2024-05-09 11:56:31.844 [pool-2-thread-6-83] INFO  com.linkcao.service.ChatService 83 processPrompt - 提示信息Hello，请回答3216
2024-05-09 11:56:31.844 [pool-2-thread-6-84] INFO  com.linkcao.service.ChatService 84 processPrompt - 输出你好，请问有什么我可以帮助你的吗？3216是什么意思呢？
2024-05-09 11:56:31.985 [pool-2-thread-2-83] INFO  com.linkcao.service.ChatService 83 processPrompt - 提示信息Hello，请回答321
2024-05-09 11:56:31.985 [pool-2-thread-2-84] INFO  com.linkcao.service.ChatService 84 processPrompt - 输出你好，我是您的助手，请问有什么可以帮助您的吗？
2024-05-09 15:48:27.720 [SpringApplicationShutdownHook-650] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean 650 destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-09 15:48:27.756 [SpringApplicationShutdownHook-350] INFO  com.zaxxer.hikari.HikariDataSource 350 close - HikariPool-1 - Shutdown initiated...
2024-05-09 15:48:27.768 [SpringApplicationShutdownHook-352] INFO  com.zaxxer.hikari.HikariDataSource 352 close - HikariPool-1 - Shutdown completed.
